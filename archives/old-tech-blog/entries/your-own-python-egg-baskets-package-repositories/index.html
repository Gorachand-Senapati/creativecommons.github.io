<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon" href="/static/favicon.ico">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet"> 
<link rel="stylesheet" href="/static/gen/style.css">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
<script type="text/javascript" src="/static/gen/script.js"></script>
<title>Your own python egg baskets / package repositories â€” Creative Commons on GitHub</title>
<body>
  <div class="ga-script">
<div id="ga-script"></div>
<script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-2010376-37', 'auto');
        ga('send', 'pageview');
</script>
</div>
  <header class="main-header">
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col-9">
          <nav class="navbar navbar-expand-xl navbar-dark" name="top">
            
            <a class="navbar-brand" href="/">
              <img src="/cclogo.svg">
              <span class="legend">Creative Commons Open Source</span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
        
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarContributingCodeDropdown" role="button">Contributing Code</a>
                  <div class="dropdown-menu" aria-labelledby="navbarContributingCodeDropdown">
                    
                      <a class="dropdown-item" href="/contributing-code/">Overview</a>
                    
                      <a class="dropdown-item" href="/contributing-code/pr-guidelines/">Pull Request Guidelines</a>
                    
                      <a class="dropdown-item" href="/contributing-code/github-repo-guidelines/">GitHub Repo Guidelines</a>
                    
                  </div>
                </li>
                
                  <li class="nav-item">
                    <a class="nav-link" href="/projects/">Projects</a>
                  </li>
                
                  <li class="nav-item">
                    <a class="nav-link" href="/blog/">Blog</a>
                  </li>
                
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarCommunityDropdown" role="button">Community</a>
                  <div class="dropdown-menu" aria-labelledby="navbarCommunityDropdown">
                    
                      <a class="dropdown-item" href="/community/">Join the Community</a>
                    
                      <a class="dropdown-item" href="/community/write-a-blog-post/">Write a Blog Post</a>
                    
                      <a class="dropdown-item" href="/community/code-of-conduct/">Code of Conduct</a>
                    
                      <a class="dropdown-item" href="/community/code-of-conduct/enforcement/">Code of Conduct Enforcement</a>
                    
                  </div>
                </li>
                <li class="nav-item dropdown ">
                  <a class="nav-link" href="#" id="navbarGSoCDropdown" role="button">GSoC 2019</a>
                  <div class="dropdown-menu" aria-labelledby="navbarGSoCDropdown">
                    
                      <a class="dropdown-item" href="/gsoc-2019/">General Information</a>
                    
                      <a class="dropdown-item" href="/gsoc-2019/project-ideas/all/">Project Ideas</a>
                    
                      <a class="dropdown-item" href="/gsoc-2019/student-expectations/">Student Expectations</a>
                    
                      <a class="dropdown-item" href="/gsoc-2019/application-instructions/">Application Instructions</a>
                    
                  </div>
                </li>
                <li class="nav-item dropdown  active">
                  <a class="nav-link" href="#" id="navbarArchivesDropdown" role="button">Archives</a>
                  <div class="dropdown-menu" aria-labelledby="navbarArchivesDropdown">
                    
                      <a class="dropdown-item" href="/archives/old-tech-blog/">CC Tech Blog (2007-2014)</a>
                    
                  </div>
                </li>
              </ul>
          </nav>
        </div>
      </div>
    </div>
  </header>
  <div class="container-fluid page-content">
    <div class="row justify-content-md-center">
      <div class="col-9 content-wrap">
        <div class="page py-3">
          <h1 class="page-title pb-3 mb-4">Archive: CC Technical Blog (2007-2014)</h1>
          
  <h2 class="mb-0">Your own python egg baskets / package repositories</h2>
  
  <p class="meta text-muted mt-0">by <a href="/archives/old-tech-blog/authors/cwebber">cwebber</a>
  on Monday, 2011 February 14</p>
  <div class="body"><p>At Creative Commons sometimes we have python packages that we use a lot but which aren't generally useful enough to put on <a href="http://pypi.python.org/pypi">PyPi</a> (such as <a href="http://code.creativecommons.org/viewgit/cc.license.git/">cc.license</a> and <a href="http://code.creativecommons.org/viewgit/license.rdf.git/">cc.licenserdf</a>). Luckily, as long as you and your organization don't have a problem with having your packages available publicly, it's fairly easy to put up a public egg basket (that is, a simple repository to put your python eggs/packages). And doing so has several advantages:</p>
<ul>
<li>You can avoid cluttering up PyPi with packages that have a very marginal or internal audience. cc.licenserdf matters a lot for our site, but probably is worthless to anyone searching for "RDF" tools on pypi.</li>
<li>Putting a package up on PyPi suggests a certain amount of responsibility to keep that updated and keep its API stable. If it's for internal use, maybe that responsibility is unwanted or unneeded.</li>
<li>Using proper python packaging means you can take full advantage of python's ecosystem of installation tools, including useful dependency resolution.</li>
<li>Making packaged releases encourages a certain amount of responsibility toward your internal dependencies, reducing the "cowboy coding" factor (fun, but often not good in an environment that requires stability).</li>
</ul>
<p>So, how to do it? The first step is to make a directory that's statically served by Apache. Ours is at <a href="http://code.creativecommons.org/basket/">http://code.creativecommons.org/basket/</a>. The directory has the <a href="https://secure.wikimedia.org/wikipedia/en/wiki/Sticky_bit">sticky bit</a> set so that everyone on the server can write to it without clobbering each other, kind of like in <code>/tmp/</code> on most GNU/Linux installs. Everyone puts their tarballs up here. As for you or your organization's "your own" packages, I think it's fine to put all your eggs in just one basket like this. :)</p>
<p>But what should those packages look like?</p>
<p>Generally at the toplevel of your package you have something that looks like:</p>
<pre><code>from setuptools import setup, find_packages
import sys, os

setup(
    name='licenseclarity',
    version='0.1',
    packages=['licenseclarity'],
    description="Tools to clarify any licensing issue you have ever had",

    author='John Doe(ig)',
    author_email='johndoe-ig@example.org',
    license='MIT',

    # ... etc ...

    **# Put your dependencies here...    install_requires=[
         'setuptools',
        'dependency1',
        'dependency2',
        ],

    # And a link to your basket here
    dependency_links=[
        'http://code.creativecommons.org/basket/',
        ],**
    )
</code></pre>
<p>Obviously, replace values with ones that make sense for your package. The main things we're talking about here are <a href="http://peak.telecommunity.com/DevCenter/setuptools#declaring-dependencies">install_requires</a> and <a href="http://peak.telecommunity.com/DevCenter/setuptools#dependencies-that-aren-t-in-pypi">dependency_links</a>. Replace install_requires with whatever list of dependencies your package requires, and put your your own egg basket in the dependency_links list. After that, I guess set up whatever other large number of attributes you can apply to the setup function that make sense to your package (entry_points maybe? zip_safe=False is a nice one).</p>
<p>Lastly, maybe now that you have an egg basket, you'd like to know how to make some eggs to put in that basket. Pretty easy once you have setup.py! All you really need to do is this:</p>
<pre><code>python setup.py sdist
</code></pre>
<p>Assuming things run well, do an <code>ls</code> into your dist/ directory. Hey, what do you know! There's a tarball there. cp or scp or (heaven forbid) ftp it to your egg basket, and there you go. You just made a release! Maybe the next time you do it you'll want to increment the version number.</p>
<p><strong>Appendix: Why you should always list your dependencies in your package</strong></p>
<p>Lastly I'd like to make a comment on only using <a href="http://www.buildout.org/">buildout's</a> <a href="http://www.buildout.org/docs/tutorial.html#installing-eggs">config file</a> or <a href="http://pip.openplans.org/">pip's</a> <a href="http://pip.openplans.org/requirement-format.html">requirements file</a> to declare requirements: it's completely crazy, don't do it! Well okay, it's not <em>completely</em> crazy, but you really should fill out the install_requires section in setup.py regardless of whether you are also using those tools. There are a couple of reasons for this:</p>
<ul>
<li>Recursive dependencies: maybe someone will use your module as a library, and then they'll have to declare your dependencies all over again if you don't put them in install_requires. Let python's package management tools handle the dependency graph logic, that's where it belongs.</li>
<li>What happens if you build your tool in buildout and someone wants to use virtualenv/pip or vice versa? Both of these tools will check the install_requires section anyway, so be nice and fill it out!</li>
</ul>
<p>Of course there are some awesome things that buildout and the pip requirements file can do to; for example they can install dependencies from VCS and etc which is useful in particular cases, particularly for certain in-development packages. By all means, use these tools to do that (and lots of other cool things, because both buildout and virtualenv/pip are pretty awesome). Just be a good packager and also fill out install_requires.</p>
<p>Now you have your own egg basket (which is completely vegan), you know how to make packages to put in it, and everyone is happy. Horray! Today we learned things (maybe).</p>
<p><em>Thanks to<a href="http://asheesh.org/">Asheesh Laroia</a> for his detailed feedback on this post.</em></p>
</div>
  <div class="card bg-light">
    <div class="card-body p-2">
      <p class="meta my-0"><span class="mr-2"><strong>Categories:</strong></span>
        
          
          
          <a href=" /archives/old-tech-blog/categories/python ">python</a>
          
        
      </p>
    </div>
  </div>

          <a id="back-to-top" href="#top" class="btn btn-dark btn-sm" role="button">Back to top</a>
        </div>
      </div>
    </div>
  </div>
  <footer class="main-footer bg-dark">
    <div class="container-fluid">
      <div class="row justify-content-md-center">
        <div class="col-9 footer text-light py-4 px-3">
          <small>
            <p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License"
                  style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a></p>
            <p class="text-muted">All the content on this website is licensed under a <strong><a rel="license"
                  href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International
                  License</a></strong> unless otherwise specified.</p>
          </small>
        </div>
      </div>
    </div>
  </footer>
</body>
